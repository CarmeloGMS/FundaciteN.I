---
import RegistrationForm from './RegistrationForm.astro';
---

<!-- Marketing menu: uso del UL provisto por el usuario, con estilos Tailwind para centrado y negrilla pronunciada -->
<nav class="py-4">
  <div class="max-w-6xl mx-auto px-4 text-center">
    <ul class="flex flex-col sm:flex-row justify-center items-center gap-6">
      <li>
       </li>
      <li>
  <a class="menu proyectos font-extrabold text-white text-lg md:text-xl lg:text-2xl tracking-wide no-underline" href="#" data-title="Proyectos">
          <span>
            <span>Proyectos</span>
          </span>
        </a>
      </li>
      <li>
        <!-- Toggle button to show the embedded registration form -->
  <button id="toggleRegistration" class="menu recursos font-extrabold text-white text-lg md:text-xl lg:text-2xl tracking-wide no-underline bg-transparent border-0">        
          <span>
            <span>Registro</span>
          </span>
        </button>
      </li>
      <li class="relative">
        <!-- Contact button toggles a small popover with contact details -->
  <button id="toggleContact" class="menu contacto font-extrabold text-white text-lg md:text-xl lg:text-2xl tracking-wide no-underline bg-transparent border-0">        
          <span>
            <span>Contacto</span>
          </span>
        </button>
        <!-- Popover (hidden by default) -->
        <div id="menuContactInfo" class="absolute left-1/2 transform -translate-x-1/2 mt-3 w-[320px] bg-white/6 backdrop-blur-sm border border-white/10 text-slate-100 p-4 rounded-md shadow-lg hidden z-50">
          <p class="text-sm"><strong>Dirección:</strong> Piso 1, Complejo Deportivo Científico y Cultural de La Guaira, frente al Complejo Educativo República de Panamá.</p>
          <p class="text-sm mt-2"><strong>Correo institucional:</strong> <a href="mailto:Laguairafundacite@gmail.com" class="hover:underline">Laguairafundacite@gmail.com</a></p>
          <p class="text-sm mt-2"><strong>Teléfono:</strong> <a href="tel:+584241574019" class="hover:underline">0424-157.401.9</a>, <a href="tel:+584242892944" class="hover:underline">0424-289.29.44</a></p>
          <div class="mt-3 text-right">
            <button id="menuContactGotoFooter" class="text-xs text-slate-300 underline">Ir al pie</button>
          </div>
        </div>
      </li>
    </ul>
  </div>
</nav>

<!-- Embedded registration form (hidden by default, toggled from the menu) -->
<div id="menuRegistration" class="max-w-3xl mx-auto p-4 hidden">
  <RegistrationForm />
</div>

<script>
  // Simple toggle handler for the embedded registration form
  (function(){
    const btn = document.getElementById('toggleRegistration');
    const panel = document.getElementById('menuRegistration');
    if(!btn || !panel) return;
    btn.addEventListener('click', (e)=>{
      e.preventDefault();
      panel.classList.toggle('hidden');
      panel.scrollIntoView({behavior:'smooth', block:'center'});
    });
  })();

  // Toggle handler for contact popover
  (function(){
    const btn = document.getElementById('toggleContact');
    const pop = document.getElementById('menuContactInfo');
    const goto = document.getElementById('menuContactGotoFooter');
    if(!btn || !pop) return;
    btn.addEventListener('click', (e)=>{
      e.preventDefault();
      pop.classList.toggle('hidden');
    });
    // click outside to close
    document.addEventListener('click', (e)=>{
      const t = e.target;
      if(!(t instanceof Node)) return;
      if(!btn.contains(t) && !pop.contains(t)){
        pop.classList.add('hidden');
      }
    });
    if(goto){
      goto.addEventListener('click',(e)=>{
        e.preventDefault();
        document.getElementById('contacto')?.scrollIntoView({behavior:'smooth'});
        pop.classList.add('hidden');
      });
    }
  })();
</script>