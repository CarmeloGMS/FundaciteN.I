---
import RegistrationForm from '../components/RegistrationForm.astro';
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Fundacite N.I.</title>
		<link rel="stylesheet" href="/src/styles/global.css">
	</head>
	<body class="antialiased text-slate-900 min-h-screen font-sans">
		<!-- Decorative tech background layers -->
		<div aria-hidden="true" class="fixed inset-0 -z-10 pointer-events-none">
			<div class="absolute inset-0 bg-gradient-to-br from-[rgb(91,42,122)] to-[rgb(11,116,218)]"></div>
			<svg class="absolute inset-0 w-full h-full opacity-24" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" width="100%" height="100%" viewBox="0 0 800 600">
				<defs>
					<radialGradient id="g1" cx="20%" cy="10%">
						<stop offset="0%" stop-color="rgb(255,255,255)" stop-opacity="0.03" />
						<stop offset="60%" stop-color="rgb(91,42,122)" stop-opacity="0.08" />
						<stop offset="100%" stop-color="rgb(11,116,218)" stop-opacity="0" />
					</radialGradient>
				</defs>
				<rect width="800" height="600" fill="url(#g1)"></rect>
				<!-- subtle grid lines -->
				<g stroke="#ffffff" stroke-opacity="0.03" stroke-width="1">
					{Array.from({length:20}).map((_,i)=> (
						<line x1={i*40} y1="0" x2={i*40} y2="600" />
					))}
					{Array.from({length:15}).map((_,i)=> (
						<line x1="0" y1={i*40} x2="800" y2={i*40} />
					))}
				</g>
			</svg>
		</div>

		<slot />

		<!-- Registration modal (hidden by default) -->

		<!-- Footer -->
		<footer class="mt-12 border-t border-slate-200/10 py-6">
			<div class="container mx-auto px-4">
				<!-- Responsive logo group: stacked on mobile, row on md+ -->
				<div class="flex flex-col md:flex-row items-center justify-center gap-6">
					<img src="/logo-venezuela.webp" alt="Logo Venezuela" class="h-12 md:h-16 lg:h-24" />
					<img src="/fundacite.webp" alt="Fundacite" class="h-12 md:h-16 lg:h-24" />
				</div>
				<p class="mt-4 text-center text-sm text-slate-300">© {new Date().getFullYear()} Fundacite N.I. — Todos los derechos reservados</p>
			</div>
		</footer>

		<div id="registerModal" class="fixed inset-0 z-50 hidden items-center justify-center px-4">
			<div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="window.closeRegisterModal()" />
			<div class="relative max-w-3xl w-full">
				<div class="card">
					<div class="flex items-start justify-between">
						<h2 class="text-xl font-bold">Registro de Innovador</h2>
						<button aria-label="Cerrar" class="text-slate-600 hover:text-slate-800" onclick="window.closeRegisterModal()">✕</button>
					</div>
					<div class="mt-4">
						<RegistrationForm />
					</div>
				</div>
			</div>
		</div>

		<script>
			// Expose functions to open/close registration modal
			/** Attach to window in a safe, typed way */
			(function(){
				function openRegisterModal(){
					const modal = document.getElementById('registerModal');
					if(modal){
						modal.classList.remove('hidden');
						document.body.classList.add('overflow-hidden');
					}
				}
				function closeRegisterModal(){
					const modal = document.getElementById('registerModal');
					if(modal){
						modal.classList.add('hidden');
						document.body.classList.remove('overflow-hidden');
					}
				}
				// @ts-ignore - attach helper functions
				window.openRegisterModal = openRegisterModal;
				// @ts-ignore
				window.closeRegisterModal = closeRegisterModal;
			})();
		</script>
	</body>
</html>

<style>
	html, body { margin: 0; width: 100%; height: 100%; }
</style>
