---
---
<section id="registro" class="max-w-3xl mx-auto p-6 rounded-lg shadow-sm text-slate-900" style="background-color: rgba(255, 242, 249, 0.8);">
  <h2 class="text-2xl font-bold mb-2">Registro de nuevo innovador</h2>
  <p class="text-sm text-slate-600 mb-4">Si quieres formar parte de proyectos de ciencia y tecnología, completa este formulario. Selecciona tu perfil y cuéntanos tus habilidades.</p>

  <form id="registrationForm" class="grid gap-3">
    <div class="grid sm:grid-cols-2 gap-3">
      <label class="relative block">
        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500" viewBox="0 0 24 24" fill="none" aria-hidden>
          <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
          <path d="M4 20v-1c0-2.21 3.58-4 8-4s8 1.79 8 4v1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
        <input name="nombre" placeholder="Nombre completo" required class="w-full pl-12 p-3 rounded-md border text-slate-900 focus:ring-2 focus:ring-sky-300 bg-white/90" />
      </label>

      <label class="relative block">
        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500" viewBox="0 0 24 24" fill="none" aria-hidden>
          <rect x="3" y="4" width="18" height="16" rx="2" stroke="currentColor" stroke-width="1.5"></rect>
          <path d="M7 8h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
        </svg>
        <input name="cedula" placeholder="Cédula" required class="w-full pl-12 p-3 rounded-md border text-slate-900 focus:ring-2 focus:ring-sky-300 bg-white/90" />
      </label>
    </div>

    <div class="grid sm:grid-cols-2 gap-3">
      <label class="relative block">
        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500" viewBox="0 0 24 24" fill="none" aria-hidden>
          <path d="M3 7a2 2 0 012-2h1l2 3 3 1 3-1 2-3h1a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V7z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <input name="numeroContacto" placeholder="Número de contacto" required class="w-full pl-12 p-3 rounded-md border text-slate-900 focus:ring-2 focus:ring-sky-300 bg-white/90" />
      </label>

      <label class="relative block">
        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500" viewBox="0 0 24 24" fill="none" aria-hidden>
          <path d="M3 8l9 6 9-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
          <rect x="3" y="4" width="18" height="16" rx="2" stroke="currentColor" stroke-width="1.5"></rect>
        </svg>
        <input name="email" type="email" placeholder="Correo electrónico" required class="w-full pl-12 p-3 rounded-md border text-slate-900 focus:ring-2 focus:ring-sky-300 bg-white/90" />
      </label>
    </div>

    <div class="grid sm:grid-cols-2 gap-3">
      <label class="relative block">
        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500" viewBox="0 0 24 24" fill="none" aria-hidden>
          <path d="M12 2v6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M5 12h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <input name="areaEspecializacion" placeholder="Área de especialización (breve)" class="w-full pl-12 p-3 rounded-md border text-slate-900 focus:ring-2 focus:ring-sky-300 bg-white/90" />
      </label>

      <label class="relative block">
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5 text-slate-500" viewBox="0 0 24 24" fill="none" aria-hidden>
            <path d="M3 7h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            <path d="M3 12h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            <path d="M3 17h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
          </svg>
          <span class="text-sm text-slate-700">Ramas</span>
        </div>
        <div class="relative mt-2">
          <select name="ramas" class="w-full p-3 border rounded-md focus:ring-2 focus:ring-sky-300 bg-white/90 text-slate-900 appearance-none pr-10">
            <option value="">Selecciona una rama</option>
            <option value="Inteligencia Artificial">Inteligencia Artificial</option>
            <option value="Biotecnología">Biotecnología</option>
            <option value="Nanotecnología">Nanotecnología</option>
            <option value="Energías Renovables">Energías Renovables</option>
            <option value="Robótica">Robótica</option>
            <option value="Ingeniería Biomédica">Ingeniería Biomédica</option>
            <option value="Ciencias de la Computación">Ciencias de la Computación</option>
            <option value="Física Cuántica">Física Cuántica</option>
            <option value="Química Aplicada">Química Aplicada</option>
            <option value="Astronomía y Astrofísica">Astronomía y Astrofísica</option>
            <option value="Ingeniería Aeroespacial">Ingeniería Aeroespacial</option>
            <option value="Neurociencia">Neurociencia</option>
            <option value="Genética y Biología Molecular">Genética y Biología Molecular</option>
            <option value="Ciencia de Materiales">Ciencia de Materiales</option>
            <option value="Telecomunicaciones">Telecomunicaciones</option>
            <option value="Ingeniería Electrónica">Ingeniería Electrónica</option>
            <option value="Desarrollo de Software">Desarrollo de Software</option>
            <option value="Ciberseguridad">Ciberseguridad</option>
            <option value="Internet de las Cosas (IoT)">Internet de las Cosas (IoT)</option>
            <option value="Realidad Virtual y Aumentada">Realidad Virtual y Aumentada</option>
            <option value="Impresión 3D y Fabricación Aditiva">Impresión 3D y Fabricación Aditiva</option>
            <option value="Agricultura de Precisión">Agricultura de Precisión</option>
            <option value="Tecnología Médica">Tecnología Médica</option>
            <option value="Ingeniería Ambiental">Ingeniería Ambiental</option>
            <option value="Otras áreas de Ciencia y Tecnología">Otras áreas de Ciencia y Tecnología</option>
          </select>
          <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-600 pointer-events-none" viewBox="0 0 20 20" fill="none" aria-hidden>
            <path d="M6 8l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
        </div>
      </label>
    </div>

    <label class="block">
      <textarea name="experiencia" rows="4" placeholder="Experiencia en su área (describa en breve)" class="w-full p-3 border rounded-md focus:ring-2 focus:ring-sky-300 bg-white/90 text-slate-900"></textarea>
    </label>

    <label class="block">
      <textarea name="proyectosRealizados" rows="3" placeholder="Proyectos realizados (breve descripción)" class="w-full p-3 border rounded-md focus:ring-2 focus:ring-sky-300 bg-white/90 text-slate-900"></textarea>
    </label>

    <label class="block">
      <textarea name="proyectosPlanificados" rows="3" placeholder="Proyectos planificados (breve descripción)" class="w-full p-3 border rounded-md focus:ring-2 focus:ring-sky-300 bg-white/90 text-slate-900"></textarea>
    </label>

    <label class="block text-sm text-slate-600">Adjuntar CV (opcional)</label>
    <input name="cv" type="file" accept=".pdf,.doc,.docx" class="text-sm" />

    <div class="flex items-center gap-3">
      <button type="submit" class="bg-[#833AB4] text-white px-4 py-2 rounded-md hover:brightness-95">Enviar registro</button>
      <div id="registerStatus" class="text-sm text-slate-700"></div>
    </div>
  </form>

</section>

<script>
  const maybeForm = document.getElementById('registrationForm');
  const statusEl = /** @type {HTMLElement | null} */ (document.getElementById('registerStatus'));
  if (maybeForm instanceof HTMLFormElement && statusEl) {
    const formEl = maybeForm;
    formEl.addEventListener('submit', async (e) => {
      e.preventDefault();
      statusEl.textContent = 'Enviando registro...';

      const fd = new FormData(formEl);

      // Build a JSON object from the new Spanish-named fields. File handling left to backend.
      const payload = {
        nombre: fd.get('nombre'),
        cedula: fd.get('cedula'),
        numeroContacto: fd.get('numeroContacto'),
        email: fd.get('email'),
        areaEspecializacion: fd.get('areaEspecializacion'),
  ramas: fd.get('ramas'),
        experiencia: fd.get('experiencia'),
        proyectosRealizados: fd.get('proyectosRealizados'),
        proyectosPlanificados: fd.get('proyectosPlanificados')
      };

      try {
        const res = await fetch('/api/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        if (res.ok) {
          statusEl.textContent = 'Registro recibido. Nos pondremos en contacto.';
          formEl.reset();
          if (typeof window !== 'undefined' && typeof window['closeRegistrationModal'] === 'function') {
            window['closeRegistrationModal']();
          }
        } else {
          const text = await res.text();
          statusEl.textContent = 'Error: ' + (text || res.statusText);
        }
      } catch (err) {
        console.error(err);
        statusEl.textContent = 'Error de red. Intenta de nuevo.';
      }
    });
  }
</script>
